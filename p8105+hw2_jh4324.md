Homework 2
================
Jiying Han

``` r
library(tidyverse)
```

    ## ── Attaching packages ──────────────────────────────────────────────────────────────────────────────────────────────── tidyverse 1.3.0 ──

    ## ✓ ggplot2 3.3.2     ✓ purrr   0.3.4
    ## ✓ tibble  3.0.3     ✓ dplyr   1.0.2
    ## ✓ tidyr   1.1.2     ✓ stringr 1.4.0
    ## ✓ readr   1.3.1     ✓ forcats 0.5.0

    ## ── Conflicts ─────────────────────────────────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()

``` r
library(readxl)
```

## Problem 1

Read the Mr. Trashwheel dataset.

``` r
trashwheel_df = 
  read_xlsx("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
            sheet = "Mr. Trash Wheel",
            range = cell_cols("A:N")) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(
    sports_balls = round(sports_balls),
    sports_balls = as.integer(sports_balls)
  )
```

Read the precipitation data\! for 2018 and 2017

``` r
precip_2018 = 
  read_xlsx("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
  sheet = "2018 Precipitation", 
  skip = 1) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2018) %>% 
  relocate(year)

precip_2017 = 
  read_xlsx("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
  sheet = "2017 Precipitation", 
  skip = 1) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2017) %>% 
  relocate(year)
```

Now combine annual precipitation.

``` r
precip_df = 
  bind_rows(precip_2018,precip_2017) %>% 
  mutate(month.name[month])
```

This dataset contains information from the Mr.Trashwheel collector in
Baltimore. As trash enters the inner harbor, the trashwheel collects
that trash, and stores it in a dumpster. The dataset contains
information on year, month, and trash collected, include some specific
kinds of trash. There are a total of 344 rows in our final dataset.
Additional data sheets include month precipitation data.

## Problem 2

``` r
nyc_df = 
  read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv")
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_double(),
    ##   Route9 = col_double(),
    ##   Route10 = col_double(),
    ##   Route11 = col_double(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

``` r
str(nyc_df)
```

    ## tibble [1,868 × 32] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
    ##  $ Division          : chr [1:1868] "BMT" "BMT" "BMT" "BMT" ...
    ##  $ Line              : chr [1:1868] "4 Avenue" "4 Avenue" "4 Avenue" "4 Avenue" ...
    ##  $ Station Name      : chr [1:1868] "25th St" "25th St" "36th St" "36th St" ...
    ##  $ Station Latitude  : num [1:1868] 40.7 40.7 40.7 40.7 40.7 ...
    ##  $ Station Longitude : num [1:1868] -74 -74 -74 -74 -74 ...
    ##  $ Route1            : chr [1:1868] "R" "R" "N" "N" ...
    ##  $ Route2            : chr [1:1868] NA NA "R" "R" ...
    ##  $ Route3            : chr [1:1868] NA NA NA NA ...
    ##  $ Route4            : chr [1:1868] NA NA NA NA ...
    ##  $ Route5            : chr [1:1868] NA NA NA NA ...
    ##  $ Route6            : chr [1:1868] NA NA NA NA ...
    ##  $ Route7            : chr [1:1868] NA NA NA NA ...
    ##  $ Route8            : num [1:1868] NA NA NA NA NA NA NA NA NA NA ...
    ##  $ Route9            : num [1:1868] NA NA NA NA NA NA NA NA NA NA ...
    ##  $ Route10           : num [1:1868] NA NA NA NA NA NA NA NA NA NA ...
    ##  $ Route11           : num [1:1868] NA NA NA NA NA NA NA NA NA NA ...
    ##  $ Entrance Type     : chr [1:1868] "Stair" "Stair" "Stair" "Stair" ...
    ##  $ Entry             : chr [1:1868] "YES" "YES" "YES" "YES" ...
    ##  $ Exit Only         : chr [1:1868] NA NA NA NA ...
    ##  $ Vending           : chr [1:1868] "YES" "YES" "YES" "YES" ...
    ##  $ Staffing          : chr [1:1868] "FULL" "NONE" "FULL" "FULL" ...
    ##  $ Staff Hours       : chr [1:1868] NA NA NA NA ...
    ##  $ ADA               : logi [1:1868] FALSE FALSE FALSE FALSE FALSE FALSE ...
    ##  $ ADA Notes         : chr [1:1868] NA NA NA NA ...
    ##  $ Free Crossover    : logi [1:1868] FALSE FALSE TRUE TRUE TRUE TRUE ...
    ##  $ North South Street: chr [1:1868] "4th Ave" "4th Ave" "4th Ave" "4th Ave" ...
    ##  $ East West Street  : chr [1:1868] "25th St" "25th St" "36th St" "36th St" ...
    ##  $ Corner            : chr [1:1868] "SE" "SW" "NW" "NE" ...
    ##  $ Entrance Latitude : num [1:1868] 40.7 40.7 40.7 40.7 40.7 ...
    ##  $ Entrance Longitude: num [1:1868] -74 -74 -74 -74 -74 ...
    ##  $ Station Location  : chr [1:1868] "(40.660397, -73.998091)" "(40.660397, -73.998091)" "(40.655144, -74.003549)" "(40.655144, -74.003549)" ...
    ##  $ Entrance Location : chr [1:1868] "(40.660323, -73.997952)" "(40.660489, -73.998220)" "(40.654490, -74.004499)" "(40.654365, -74.004113)" ...
    ##  - attr(*, "spec")=
    ##   .. cols(
    ##   ..   Division = col_character(),
    ##   ..   Line = col_character(),
    ##   ..   `Station Name` = col_character(),
    ##   ..   `Station Latitude` = col_double(),
    ##   ..   `Station Longitude` = col_double(),
    ##   ..   Route1 = col_character(),
    ##   ..   Route2 = col_character(),
    ##   ..   Route3 = col_character(),
    ##   ..   Route4 = col_character(),
    ##   ..   Route5 = col_character(),
    ##   ..   Route6 = col_character(),
    ##   ..   Route7 = col_character(),
    ##   ..   Route8 = col_double(),
    ##   ..   Route9 = col_double(),
    ##   ..   Route10 = col_double(),
    ##   ..   Route11 = col_double(),
    ##   ..   `Entrance Type` = col_character(),
    ##   ..   Entry = col_character(),
    ##   ..   `Exit Only` = col_character(),
    ##   ..   Vending = col_character(),
    ##   ..   Staffing = col_character(),
    ##   ..   `Staff Hours` = col_character(),
    ##   ..   ADA = col_logical(),
    ##   ..   `ADA Notes` = col_character(),
    ##   ..   `Free Crossover` = col_logical(),
    ##   ..   `North South Street` = col_character(),
    ##   ..   `East West Street` = col_character(),
    ##   ..   Corner = col_character(),
    ##   ..   `Entrance Latitude` = col_double(),
    ##   ..   `Entrance Longitude` = col_double(),
    ##   ..   `Station Location` = col_character(),
    ##   ..   `Entrance Location` = col_character()
    ##   .. )

Read and clean the data;

``` r
nyc_df = 
  read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>%
  janitor::clean_names() %>% 
  select(line:entry,vending,ada) %>% 
  mutate(entry = recode(entry, "YES" = TRUE,  "NO" = FALSE) %>% 
           as.numeric()
         )
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_double(),
    ##   Route9 = col_double(),
    ##   Route10 = col_double(),
    ##   Route11 = col_double(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

paragraph about this dataset – explain briefly what variables the
dataset contains, describe your data cleaning steps so far, and give the
dimension (rows x columns) of the resulting dataset. Are these data
tidy?

How many distinct stations are there?

``` r
distinct_station = distinct(nyc_df,station_name)
```

How many stations are ADA compliant?

``` r
station_ada = 
  tibble(
    station_name = pull(nyc_df,station_name),
    ada = as.numeric(pull(nyc_df,ada)),
           ) 
filter(station_ada, ada == 1)
```

    ## # A tibble: 468 x 2
    ##    station_name               ada
    ##    <chr>                    <dbl>
    ##  1 Atlantic Av-Barclays Ctr     1
    ##  2 DeKalb Av                    1
    ##  3 DeKalb Av                    1
    ##  4 DeKalb Av                    1
    ##  5 DeKalb Av                    1
    ##  6 DeKalb Av                    1
    ##  7 DeKalb Av                    1
    ##  8 Pacific St                   1
    ##  9 Pacific St                   1
    ## 10 Grand Central                1
    ## # … with 458 more rows

``` r
distinct_list = distinct(station_ada, station_name)
number = nrow(distinct_list)
```

What proportion of station entrances / exits without vending allow
entrance?

``` r
entra_novend = 
  read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>%
  janitor::clean_names() %>% 
  select(entrance_type:vending) %>% 
  mutate(vending = recode(vending, "YES" = TRUE, "NO" = FALSE)) %>% 
  filter(vending == FALSE)
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_double(),
    ##   Route9 = col_double(),
    ##   Route10 = col_double(),
    ##   Route11 = col_double(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

``` r
entrance_exit_novend = nrow(entra_novend)
entra_novend_exit = 
  mutate(entra_novend, entry = recode(entry,"YES" = TRUE, "NO" = FALSE )) %>% 
  filter(entry == TRUE)
entrance_noexit_novend = nrow(entra_novend_exit)
proportion = entrance_noexit_novend/entrance_exit_novend
```

The proportion is 0.3770492

Reformat data so that route number and route name are distinct
variables.

``` r
nyc_df = 
  read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>%
  janitor::clean_names() %>% 
  mutate(route8 = as.character(route8)) %>% 
  mutate(route9 = as.character(route9)) %>%
  mutate(route10 = as.character(route10)) %>% 
  mutate(route11 = as.character(route11)) 
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_double(),
    ##   Route9 = col_double(),
    ##   Route10 = col_double(),
    ##   Route11 = col_double(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

``` r
reformat_nyc_df = 
  pivot_longer(
    nyc_df, route1:route11,
    names_to = "route_name",
    values_to = "route_number"
  )
```

How many distinct stations serve the A train? Of the stations that serve
the A train, how many are ADA compliant?

``` r
reformat_nyc_df1 = 
  filter(reformat_nyc_df, route_number == "A") 
distinct(reformat_nyc_df1,station_name)
```

    ## # A tibble: 56 x 1
    ##    station_name                 
    ##    <chr>                        
    ##  1 Times Square                 
    ##  2 125th St                     
    ##  3 145th St                     
    ##  4 14th St                      
    ##  5 168th St - Washington Heights
    ##  6 175th St                     
    ##  7 181st St                     
    ##  8 190th St                     
    ##  9 34th St                      
    ## 10 42nd St                      
    ## # … with 46 more rows

``` r
filter(reformat_nyc_df1, ada == TRUE ) %>% 
  distinct(station_name)
```

    ## # A tibble: 16 x 1
    ##    station_name                 
    ##    <chr>                        
    ##  1 14th St                      
    ##  2 168th St - Washington Heights
    ##  3 175th St                     
    ##  4 34th St                      
    ##  5 42nd St                      
    ##  6 59th St                      
    ##  7 Inwood - 207th St            
    ##  8 West 4th St                  
    ##  9 World Trade Center           
    ## 10 Times Square-42nd St         
    ## 11 59th St-Columbus Circle      
    ## 12 Times Square                 
    ## 13 8th Av                       
    ## 14 Franklin Av                  
    ## 15 Euclid Av                    
    ## 16 Howard Beach

## Problem 3
